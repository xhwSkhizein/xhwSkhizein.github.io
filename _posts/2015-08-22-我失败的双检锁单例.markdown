---
title: æˆ‘å¤±è´¥çš„åŒæ£€é”å•ä¾‹
layout: post
guid: urn:uuid:3da7164c-e16f-44dd-950c-e4320279293d
tags:
  - worknote
---

å†™äº†ä¸€ä¸ªå¤±è´¥çš„åŒæ£€é”å•ä¾‹, ä»£ç æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­çš„, åˆšå†™å®Œè‡ªä¿¡æ»¡æ»¡, å”‰~

		public T getInstanceBy(K key){
			T instance = map.get(key);
			if(instance == null){
				synchronized(lock){
					if(instance == null){
						instance = createTObject();
					}
				}
			}
			return instance;
		}

æ©, å°±æ˜¯è¿™ä¸ªæ ·å­, æˆåŠŸçš„æ²¡æœ‰å®ç°å•ä¾‹,åˆ›å»ºäº†ä¸€å¤§å †æ —å­...ç³–ç‚’æ —å­å˜~

æ­£ç¡®çš„å§¿åŠ¿åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­æ»´! ğŸ˜“eg:

		public T getInstanceBy(K key){
			T instance = map.get(key);
			if(instance == null){
				synchronized(lock){
					// å› ä¸ºæ‰˜ç®¡ç»™äº†å®¹å™¨,éœ€è¦å»å®¹å™¨é‡Œæ£€æŸ¥ğŸ˜±ğŸ˜±ğŸ˜±
					instance = map.get(key);
					if(instance == null){
						instance = createTObject();
					}
				}
			}
			return instance;
		}
